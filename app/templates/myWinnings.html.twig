<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png') }}">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="manifest" href="/site.webmanifest">

    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">

    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <script
            src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
            integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
            crossorigin="anonymous"></script>
    <script src="{{ asset('assets/js/jquery.mask.min.js') }}"></script>
    <script src="{{ asset('assets/js/script.js') }}"></script>

    <title>Мои выигрыши</title>
</head>
<body>
{% include 'templateSite/sidebar.html.twig' %}
<main>
    {% include 'templateSite/header.html.twig' %}
    <div class="container">
        <div id="tabs" class="tabs">
            <ul>
                <li><a href="#myWinnings">Мои выигрыши</a></li>
                <li><a href="#myOrders">Мои заказы</a></li>
                <ul class="modals">
                    <li><a class="openModal" href="#takeAway">Забрать</a></li>
                    <li><a class="openModal" href="#exchange">Обменять</a></li>
                </ul>
            </ul>
            <div id="myWinnings">
                {% for winning in winnings %}
                    <a href="#" data-productID="{{ winning.id }}"> <img
                                src="assets/img/case/{{ winning.productid.imagePath }}" alt="Bags"></a>
                {% else %}
                    <li>No winnings found.</li>
                {% endfor %}
            </div>
            <div id="myOrders">
                <div class="order">
                    <div class="orderInfo">
                        <p>
                            <strong><img src="{{ asset('assets/img/coin.svg') }}" alt="Coins">COIN</strong>
                            <span class="yellow">666389 C</span>
                        </p>
                        <p>
                            <strong>Дата и время:</strong>
                            <span>26.05.2020 <span class="time">13:55</span></span>
                        </p>
                        <p>
                            <strong>Номер заказа:</strong>
                            <span>4135562</span>
                        </p>
                        <p>
                            <strong>Статус:</strong>
                            <span class="processing">В обработке</span>
                        </p>
                    </div>
                    <div class="orderProducts">
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                        <p><img src="{{ asset('assets/img/tshirts.png') }}" alt="T-Shirts">T-Shirts</p>
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                        <p><img src="{{ asset('assets/img/tshirts.png') }}" alt="T-Shirts">T-Shirts</p>
                    </div>
                </div>
                <div class="order">
                    <div class="orderInfo">
                        <p>
                            <strong><img src="{{ asset('assets/img/coin.svg') }}" alt="Coins">COIN</strong>
                            <span class="yellow">666389 C</span>
                        </p>
                        <p>
                            <strong>Дата и время:</strong>
                            <span>26.05.2020 <span class="time">13:55</span></span>
                        </p>
                        <p>
                            <strong>Номер заказа:</strong>
                            <span>4135562</span>
                        </p>
                        <p>
                            <strong>Статус:</strong>
                            <span class="done">Выполнен</span>
                        </p>
                    </div>
                    <div class="orderProducts">
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                    </div>
                </div>
                <div class="order">
                    <div class="orderInfo">
                        <p>
                            <strong><img src="{{ asset('assets/img/coin.svg') }}" alt="Coins">COIN</strong>
                            <span class="yellow">666389 C</span>
                        </p>
                        <p>
                            <strong>Дата и время:</strong>
                            <span>26.05.2020 <span class="time">13:55</span></span>
                        </p>
                        <p>
                            <strong>Номер заказа:</strong>
                            <span>4135562</span>
                        </p>
                        <p>
                            <strong>Статус:</strong>
                            <span class="processing">В обработке</span>
                        </p>
                    </div>
                    <div class="orderProducts">
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                        <p><img src="{{ asset('assets/img/tshirts.png') }}" alt="T-Shirts">T-Shirts</p>
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                        <p><img src="{{ asset('assets/img/tshirts.png') }}" alt="T-Shirts">T-Shirts</p>
                    </div>
                </div>
                <div class="order">
                    <div class="orderInfo">
                        <p>
                            <strong><img src="{{ asset('assets/img/coin.svg') }}" alt="Coins">COIN</strong>
                            <span class="yellow">666389 C</span>
                        </p>
                        <p>
                            <strong>Дата и время:</strong>
                            <span>26.05.2020 <span class="time">13:55</span></span>
                        </p>
                        <p>
                            <strong>Номер заказа:</strong>
                            <span>4135562</span>
                        </p>
                        <p>
                            <strong>Статус:</strong>
                            <span class="done">Выполнен</span>
                        </p>
                    </div>
                    <div class="orderProducts">
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                    </div>
                </div>
                <div class="order">
                    <div class="orderInfo">
                        <p>
                            <strong><img src="{{ asset('assets/img/coin.svg') }}" alt="Coins">COIN</strong>
                            <span class="yellow">666389 C</span>
                        </p>
                        <p>
                            <strong>Дата и время:</strong>
                            <span>26.05.2020 <span class="time">13:55</span></span>
                        </p>
                        <p>
                            <strong>Номер заказа:</strong>
                            <span>4135562</span>
                        </p>
                        <p>
                            <strong>Статус:</strong>
                            <span class="done">Выполнен</span>
                        </p>
                    </div>
                    <div class="orderProducts">
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                        <p><img src="{{ asset('assets/img/bags.png') }}" alt="Bags">Bags</p>
                        <p><img src="{{ asset('assets/img/console.png') }}" alt="Console">Console</p>
                        <p><img src="{{ asset('assets/img/phone.png') }}" alt="Phone">Phone</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include 'templateSite/footer.html.twig' %}

</main>
{% include 'templateSite/modalForm.html.twig' %}

<a href="#" id="toTop">
    <img src="{{ asset('assets/img/toTop.svg') }}" alt="Go to top">
</a>

</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Отримуємо кнопку з класом openModal
        const openModalButton = document.querySelector('.openModal');

        // Додаємо обробник кліку до кнопки
        openModalButton.addEventListener('click', (event) => {
            // Скасовуємо стандартну поведінку посилання
            event.preventDefault();

            // Отримуємо всі елементи з класом checked
            const checkedElements = document.querySelectorAll('.checked');

            // Створюємо масив для збереження productID
            const winningIDs = [];

            checkedElements.forEach(element => {
                // Отримуємо значення data-productID
                const productID = element.getAttribute('data-productID');
                if (productID) {
                    winningIDs.push(productID);
                }
            });

            // Відправляємо POST запит на сервер
            fetch('/newOrder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest',
                },
                body: JSON.stringify({winningIDs: winningIDs})
            })
                .then(response => response.json()) // Конвертуємо відповідь у JSON
                .then(result => {
                    console.log('Успіх:', result);
                })
                .catch(error => {
                    console.error('Помилка:', error);
                });
        });
    });

</script>
</html>